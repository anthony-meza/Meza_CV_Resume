\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{simpleresume}

% Base: jake_original with XeLaTeX fonts and CV.tex-compatible commands

% Packages
\usepackage{latexsym}
\usepackage[empty]{fullpage}
\usepackage{titlesec}
\usepackage{marvosym}
\usepackage[usenames,dvipsnames]{color}
\usepackage{verbatim}
\usepackage{ragged2e}
\usepackage{enumitem}
\usepackage[hidelinks]{hyperref}
\pdfstringdefDisableCommands{\let\\\space}
\usepackage{fancyhdr}
\usepackage[english]{babel}
\usepackage{tabularx}
\usepackage{textcomp}
\usepackage{fontspec}
\usepackage{setspace}

% Font style (XeLaTeX)
\setmainfont{SabonLTStd}[
    Path=./Fonts/Sabon/,
    Extension = .ttf,
    UprightFont=*-Regular,
    BoldFont=*-Bold,
    ItalicFont=*-Italic,
    BoldItalicFont=*-BoldItalic
    ]
% Use the main font everywhere
\newcommand{\HeaderFont}{\rmfamily}

% Emph style
\renewcommand{\emph}[1]{\textbf{\fontsize{11pt}{11pt}\selectfont #1}}

% Page style
\pagestyle{fancy}
\fancyhf{} % clear all header and footer fields
\fancyfoot{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\setlength{\footskip}{20pt}

% Adjust margins
\addtolength{\oddsidemargin}{-0.5in}
\addtolength{\evensidemargin}{-0.5in}
\addtolength{\textwidth}{1in}
\addtolength{\topmargin}{-.5in}
\addtolength{\textheight}{1.0in}

\urlstyle{same}
\raggedbottom
\raggedright
\setlength{\tabcolsep}{0in}

% Force body text to be left-aligned even when \justifying is used in CV.tex
\renewcommand{\justifying}{\raggedright}

% Sections formatting
\titleformat{\section}{
  \vspace{-6pt}\bfseries\raggedright\fontsize{14.5pt}{14.5pt}\selectfont
}{}{0em}{}[\color{black}\titlerule \vspace{-5pt}]

% Allow manual line breaks in section titles to be optional
\newcommand{\sectionLineBreak}{\space\allowbreak}
\makeatletter
\let\oldsection\section
\newcommand{\sectionFmt}[1]{\begingroup\let\\\sectionLineBreak #1\endgroup}
\renewcommand{\section}{%
  \@ifstar{\sectionStar}{\sectionNoStar}%
}
\newcommand{\sectionStar}[1]{\oldsection*{\sectionFmt{#1}}}
\newcommand{\sectionNoStar}{\@ifnextchar[{\sectionOpt}{\sectionNoOpt}}
\newcommand{\sectionOpt}[2]{\oldsection[\sectionFmt{#1}]{\sectionFmt{#2}}}
\newcommand{\sectionNoOpt}[1]{\oldsection{\sectionFmt{#1}}}
\makeatother

% -------------------------
% Header commands (CV.tex-compatible)
\makeatletter
\def\@headerName{}
\def\@headerContact{}
\newcommand{\headerName}[1]{\def\@headerName{#1}}
\newcommand{\headerTitle}[1]{%
  \begin{center}
    {\HeaderFont \fontsize{24pt}{24pt}\selectfont \textsc{\@headerName}} \\[0pt]
    {\HeaderFont \fontsize{13.5pt}{13.5pt}\selectfont \textsc{#1}}
  \end{center}
  \vspace{-10pt}
  \@headerContact
}
\newcommand{\headerContact}[3]{%
  \def\@headerContact{%
    \vspace{-8pt}
    \begin{center}\small
      {\HeaderFont #1} \hspace{0.4em} $|$ \hspace{0.4em} \href{mailto:#2}{#2} \hspace{0.4em} $|$ \hspace{0.4em} \href{https://#3}{#3}
    \end{center}
  }
}
\makeatother

% Section blocks
\newcommand{\sectionBlock}[2]{%
  #1%
  \par
  #2%
}

% Consistent spacing after heading blocks
\newcommand{\headingGap}{1pt}
\newcommand{\headingGapBottom}{1\headingGap}
\newcommand{\headingLeftCol}{0.72\textwidth}
\newcommand{\headingMidGap}{0.02\textwidth}
\newcommand{\headingRightCol}{0.23\textwidth}
\newcommand{\headingRightMargin}{0.03\textwidth}

% Headings
\newcommand{\eduHeading}[4]{
  \begin{tabular*}{0.97\textwidth}[t]{@{}p{\headingLeftCol}@{\hspace{\headingMidGap}}p{\headingRightCol}@{}}
    \parbox[t]{\headingLeftCol}{\raggedright\textbf{#1} \\ \textit{\small#3}} &
    \parbox[t]{\headingRightCol}{\raggedleft #2 \\ \textit{\small #4}} \\
  \end{tabular*}\vspace{\headingGap}
}

\newcommand{\internHeading}[4][]{
  \begin{tabular*}{0.97\textwidth}[t]{@{}>{\raggedright\arraybackslash}p{\headingLeftCol}@{\hspace{\headingMidGap}}>{\raggedleft\arraybackslash}p{\headingRightCol}@{}}
    \textbf{#2} & #4 \\
    \ifx&#1& & \textit{\small #3} \\
    \else \textit{\small #1} & \textit{\small #3} \\
    \fi
  \end{tabular*}\vspace{\headingGap}
}

\newcommand{\projHeading}[3]{
  \begin{tabular*}{0.97\textwidth}{l@{\extracolsep{\fill}}r}
    \small\textbf{#1} & \\
    \textit{\small#2} & \textit{\small #3} \\
  \end{tabular*}\vspace{-7pt}
}

\newcommand{\itemFont}{\normalsize}

% Lists
\newcommand{\pubListStart}{\begin{itemize}[leftmargin=0.15in, rightmargin=\headingRightMargin, label={\raisebox{0.25ex}{\tiny\textbullet}}, itemsep=0.5\baselineskip, parsep=0pt, topsep=0pt, partopsep=0pt]\raggedright\hyphenpenalty=10000\exhyphenpenalty=10000}
\newcommand{\pubListEnd}{\end{itemize}}
% Publication item boxed to the list width
\newcommand{\pubItem}[1]{%
  \item \begin{minipage}[t]{\linewidth}\raggedright\itemFont #1\end{minipage}%
}
\newcommand{\awardListStart}{\begin{itemize}[leftmargin=0.15in, label={\raisebox{0.25ex}{\tiny\textbullet}}, itemsep=0.5\baselineskip]}
\newcommand{\awardListEnd}{\end{itemize}}
\newcommand{\skillListStart}{\begin{itemize}[leftmargin=0pt, label={}, itemsep=0pt, parsep=0pt, topsep=0pt, partopsep=0pt]}
\newcommand{\skillListEnd}{\end{itemize}\vspace{-11pt}}
\newcommand{\itemListStart}{\begingroup\setstretch{1.15}\interlinepenalty=10000\clubpenalty=10000\widowpenalty=10000\begin{itemize}[itemsep=0.15\baselineskip, topsep=0pt, parsep=0pt, partopsep=0pt]}
\newcommand{\itemListEnd}{\end{itemize}\endgroup\vspace{\headingGapBottom}}

% Items
\newcommand{\myItem}[1]{
  \item\small{
    {#1 \vspace{-2pt}}
  }
}
\newcommand{\myItemAlign}[1]{%
  \item{
    \begin{tabular}[t]{@{}l@{ }l@{}}
      #1
    \end{tabular}
    \vspace{-2pt}
  }
}

\newcommand{\entryItem}[3]{%
  \item
  \begin{tabular*}{0.97\textwidth}[t]{@{}l@{\extracolsep{\fill}}r@{}}
    \itemFont #1 & \textit{#3} \\
    \textit{#2} & \\
  \end{tabular*}\vspace{-7pt}
}

% Safe nested-item label
\renewcommand\labelitemii{\raisebox{0.25ex}{\tiny\textbullet}}

\endinput
